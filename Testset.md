# テストデータ #

## データについて ##

### seeds ###
#### 01_base.xlsx ####
* プレイヤー
* ゲームデータ

#### 02_item.xlsx ####
* 装備マスタ
* アイテムマスタ
* アイテム取得方法
* アイテム取得ログ
* アイテム消費ログ
* #options

#### 03_shop.xlsx ####
* ショップメニュー
* 購入履歴
* レシートログ

#### 04_friend.xlsx ####
* フレンドシップ
* フレンドシップログ
* あいさつ定型文
* あいさつ履歴
* コンタクト種別
* コンタクトログ

#### 06_composition.xlsx ####
* 合成1
* 装備進化1

#### 10_level_up.xlsx ####
* 必要経験値

#### 13_campaign.xlsx ####
* ショップメニュー2
* 装備進化2
* ショップ期間テーブル
* 装備進化期間テーブル

#### 14_app_store_product.xlsx #####
* ショップメニュー1

#### libgss_test.xlsx #####
* conditionsテスト
* dictionaryテスト1
* dictionaryテスト2


### scripts ###

#### item_ruby_stored_script.rb ####
use_itemなどアイテムに関わる処理が記述されているスクリプト。

#### ruby_stored_script.rb ####
アイテムを使用したときや取得したときの処理などが記述されているスクリプト。

## テスト用の変更内容 ##

### 001 ###
マスタデータの追加を確認。

#### 内容 ####
* 02_item.xlsxのアイテムマスタに対して、3つのアイテムを追加する。
  - 20013: 聖水
  - 20014: 毒消し草
  - 20015: 毒消し草X -> 削除予定

#### 期待される動作 ####
* アイテムマスタデータに2つのデータが追加されていることを確認。
* dm_version,sm_versionがバージョンアップしている。
* 差分データとして追加分のアイテムデータが2件存在する。

#### 必要な作業 ####
* SCMからブランチを"master_diff_001"に変更して、AppSeed登録。
* AppSeedのマイグレーション
* ローカルサーバの再起動


### 002 ###
マスタデータの変更を確認。

#### 内容 ####
* 02_item.xlsxのアイテムマスタに対して、2つのアイテムを変更する。
  - 20002: ポーションA -> ポーションS
  - 20004: ポーションXXX -> ポーションXX

#### 期待される動作 ####
* アイテムマスタデータの2つのデータが変更されていることを確認
* dm_version,sm_versionがバージョンアップしている。
* 差分データとして変更分のアイテムデータが2件存在する。

#### 必要な作業 ####
* SCMからブランチを"master_diff_002"に変更して、AppSeed登録。
* AppSeedのマイグレーション
* ローカルサーバの再起動


### 003 ###
マスタデータの削除を確認。

#### 内容 ####
* 02_item.xlsxのアイテムマスタに対して、1つのアイテムを削除する。
  - 20015: 毒消し草X

#### 期待される動作 ####
* アイテムマスタデータの1つのデータが削除されていることを確認
* dm_version,sm_versionがバージョンアップしている。
* 差分データとして削除分のアイテムデータが1件存在する。

#### 必要な作業 ####
* SCMからブランチを"master_diff_003"に変更して、AppSeed登録。
* AppSeedのマイグレーション
* ローカルサーバの再起動


### 004 ###
ゲームデータのフィールド追加

#### 内容 ####
* 01_base.xlsxのゲームデータにステータス(status)という項目をフィールドとして追加。

#### 期待される動作 ####
* ゲームデータのフィールド定義が増えている
* other_versionがバージョンアップしている。

#### 必要な作業 ####
* SCMからブランチを"master_diff_004"に変更して、AppSeed登録。
* AppSeedのマイグレーション
* ローカルサーバの再起動


### 005 ###
ストアドスクリプトの実装。

#### 内容 ####
* status_ruby_stored_script.rbというストアドスクリプトを追加。
  - 以下のメソッドを実装。
    + StatusRubyStoredScript#status_going(argh)
    + StatusRubyStoredScript#recovery_status(argh)

#### 期待される動作 ####
* 以下のアクション実行で、ゲームデータにステータスが付与されている。
  ```
  {"inputs":[{"action":"execute","name":"StatusRubyStoredScript","key":"status_going","args":{"status":"poison"}}]}
  ```
* すべてのサブバージョンのバージョンが更新されない

#### 必要な作業 ####
* SCMからブランチを"master_diff_005"に変更して、AppSeed登録。
* AppSeedのマイグレーション
* ローカルサーバの再起動
* アクション実行から変更点に記載されているアクションを実行してみる。


### 006 ###
アイテムマスタのアイテムを使用したときのストアドスクリプトの呼び先を追記する。

#### 内容 ####
* ステータス系アイテムを使用したときのストアドスクリプトを変更する。
* また、アイテム使用時のパラメータも追記する。
  - 20014: 毒消し草
    + ストアドスクリプト名: StatusRubyStoredScript#recovery_status
    + ストアドスクリプト引数: {"status":"poison"}

#### 期待される動作 ####
* 以下のアクションを実行することで、item_cd=20014のアイテムが10個プレイヤーに付与される。
  ```
  {"inputs":[
    {"action":"execute","name":"RubyStoredScript","key":"item_incomming",
     "args":{"item":{"20014":10},"route_cd":"1"}}
  ]}
  ```
* 以下のアクションを実行することで、ゲームデータのステータスが空になっている。
  ```
  {"inputs":[{"action":"execute","name":"ItemRubyStoredScript","key":"use_item","args":{"item_cd":"20014"}}]}
  ```
* dm_version,sm_versionがバージョンアップしている。

#### 必要な作業 ####
* SCMからブランチを"master_diff_006"に変更して、AppSeed登録。
* AppSeedのマイグレーション
* ローカルサーバの再起動
* アクション実行から変更点に記載されているアクションを実行してみる。


### 007 ###
設定ファイルの変更

#### 内容 ####
* config/app_garden.ymlファイルの"platform.player_id_gen.pid_mask"と"platform.player_id_gen.counter_mask"の値を変更する

#### 期待される動作 ####
* すべてのサブバージョンのバージョンが更新されない

#### 必要な作業 ####
* SCMからブランチを"master_diff_007"に変更して、AppSeed登録。
* AppSeedのマイグレーション
* ローカルサーバの再起動


### 000 ###
#### 内容 ####
#### 期待される動作 ####
#### 必要な作業 ####
